模拟IO
===============

本章节介绍掌控板引脚的模拟输入输出的使用方法。引脚是您的电路板与连接到它的外部设备进行通信的方式。掌控板可以通过拓展板将IO引脚拓展并连接控制或读取其他元器件或模块。

.. Attention:: 

    你可以查阅 :ref:`掌控板接口引脚说明<mPythonPindesc>` ,了解可供使用的模拟引脚 。

模拟输出是通过IO引脚输出脉宽调制信号，输出指定的电压值，简称PWM。

模拟输入
--------

掌控板可供使用的模拟输入引脚有 **P0**、**P1**、**P2**、**P3**、P4、P10,其中P4,P10分别被掌控板的光线和麦克风传感器使用。


.. admonition:: 什么是模拟输入呢？

    模拟输入是将模拟信号转换为数字信号，简称ADC。



以下是使用模拟输入读取LM35温度传感器::



创建引脚对象::
    
    >>> from mpython import *
    >>> p0=MPythonPin(0,PinMode.ANALOG)


.. Note::
 
    以上配置引脚0，``mode`` 为 ``PinMode.ANALOG`` ，即模拟输入模式。


读模拟输入::

    >>> p0.read_analog()
    >>>0
    >>> p0.read_analog()
    >>>4095

.. Note::

    因为adc采样数据宽度为12bit，所以满量程为4095。

接下来，你可以在引脚0，接入阻性的电子器件，如光敏、热敏电阻。观察测量的输入值变化。


模拟输出
--------

输出2V电压::

    >>> p0=MPythonPin(0,PinMode.PWM)
    p0.write_analog(int(2/3.3*1023))    

.. Note::

    由于IO引脚电压为3.3V，我们需要输出电压为2V。因此，映射值是2/3*1023。
    由于计算出来的为浮点型数，我们还需要使用 ``int()`` 转成整型。


